## Process Injection Introduction  

### Why do we want to do process injection?  
[*] To be stealthy and avoid detection (running custom processes is very visble and detectable/suspicious)  
[*] We want to hide in a legitimate process  

### 32 vs 64bit?
[*] Most systems are 64bit32bit executables can run on 64bit due to an interception layer called "Wow64" (windows on windows64)  
[*] This layer translates syscalls that are 32bit to 64bit syscalls.  
[*] We must take this into consideration for the folowing reasons:  
[*] A 32bit DLL cannot be loaded by a 64bit process and vice versa  
[*] 32bit shellcode is obviously different from 64bit shellcode  


Techniques:
One thing these all have in common is that they are user mode only, these are ordered by complexity.  
[*] injecting DLL with a remote thread  
[*] Injecting a DLL with an APC  
[*] injecting a DLL with thread hijacking  
[*] injecting a DLL with windows hooks  
[*] Process hollowing  


### Remote thread injection 
Injection of a dll into another poccess using a remote thread  
[*] Idea is to take and create a thread in a target process and instruct that thread to load our dll, once our dll is called we can do anything :)  
[*] This is one of the oldest techniques and most easily detectable, however we will study this anyway as it is best practice to understand this technique as it lays the foundations for other, more advanced techniques

What does it look like?  

we have a target process in which we want to load our DLL  
Then we have our attacker process, which will want a handle to the target process, and write the path to the dll via the writeProcessMemory function. Next it will call the CreateRemoteThread function in order to create anotehr thread that will tell the thread to start running where the function loadlibrary is (the load library function obviously will load a dll) and then our injected dll will be loaded into memory)  
